---
import '@/styles/global.css'
import Layout from '@/layouts/Layout.astro';
---

const { parse } = require('csv-parse/sync');

async function csv_to_json() {
  
  const DEFAULT_IMAGE_URL = 'https://static.igem.wiki/teams/5230/headshots/plasmid-placeholder.png';
  const TEAM_SHEET_URL = "https://docs.google.com/spreadsheets/d/1ka_LcPMf5qNfsNNYSSbXgu-1niyEUkUJg8oVA4Xzppk/gviz/tq?tqx=out:csv&sheet=Sheet1";
  
  const response = await fetch(TEAM_SHEET_URL);
  const csv_data = await response.text();

  const team = parse(csv_data, {
    columns: ['name', 'role', 'description', 'imageSrc', 'linkedIn', 'email', 'website', 'unused'],
    from_line: 2, 
    skip_empty_lines: true,
    on_record: (member) => {
      
      const contact = {
        
        linkedin: member.linkedIn,
        email: member.email,
        website: member.website
   
      };

      return {
        name: member.name,
        role: member.role,
        description: member.description,
        imageSrc: DEFAULT_IMAGE_URL,
        contact: contact, 
      };
    }
  });
}

csv_to_json();


<Layout>
  <div class="flex flex-col min-h-screen justify-between">
    <div>

    </div>
    <footer class="flex w-full justify-center p-6">
      To be added
    </footer>
  </div>
</Layout>
